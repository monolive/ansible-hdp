{
  "configurations" : [
    {
      "hive-env" : {
        "properties" : {
          "hcat_pid_dir" : "/var/run/hadoop/webhcat",
          "hive_log_dir" : "/var/log/hadoop/hive",
          "hcat_log_dir" : "/var/log/hadoop/webhcat",
          "hive_database" : "Existing MySQL Database",
          "hive_pid_dir" : "/var/run/hadoop/hive",
          "hive_database_type" : "mysql",
          "hive_database_name" : "hive"
        }
      }
    },
    {
      "core-site" : {
        "properties" : {
          "hadoop.proxyuser.hive.groups" : "users",
          "hadoop.proxyuser.hcat.groups" : "users",
          "hadoop.proxyuser.hdfs.hosts" : "*",
          "hadoop.proxyuser.hive.hosts" : "%HOSTGROUP::master_1%",
          "hadoop.proxyuser.hcat.hosts" : "%HOSTGROUP::master_1%",
          "hadoop.proxyuser.oozie.groups" : "*",
          "hadoop.proxyuser.hdfs.groups" : "*",
          "fs.defaultFS" : "hdfs://%HOSTGROUP::master_3%:8020",
          "hadoop.proxyuser.oozie.hosts" : "%HOSTGROUP::master_1%"
        }
      }
    },
    {
      "oozie-env" : {
        "properties" : {
          "oozie_data_dir" : "/hadoop/oozie/data",
          "oozie_log_dir" : "/var/log/hadoop/oozie",
          "oozie_hostname" : "%HOSTGROUP::master_3%",
          "oozie_database" : "Existing MySQL Database",
          "oozie_pid_dir" : "/var/run/hadoop/oozie",
          "oozie_user" : "oozie"
        }
      }
    },
    {
      "yarn-env" : {
        "properties" : {
          "yarn_log_dir_prefix" : "/var/log/hadoop/yarn",
          "yarn_user" : "yarn",
          "yarn_pid_dir_prefix" : "/var/run/hadoop/yarn"
        }
      }
    },
    {
      "hive-site" : {
        "properties_attributes" : { },
        "properties" : {
          "hive.metastore.uris" : "thrift://%HOSTGROUP::master_1%:9083",
          "javax.jdo.option.ConnectionURL" : "jdbc:mysql://%HOSTGROUP::master_3%/hive?createDatabaseIfNotExist=true",
          "javax.jdo.option.ConnectionDriverName" : "com.mysql.jdbc.Driver",
          "hive.cluster.delegation.token.store.zookeeper.connectString" : "%HOSTGROUP::master_3%:2181,%HOSTGROUP::master_2%:2181,%HOSTGROUP::master_1%:2181",
          "hive.zookeeper.quorum" : "%HOSTGROUP::master_3%:2181,%HOSTGROUP::master_2%:2181,%HOSTGROUP::master_1%:2181"
        }
      }
    },
    {
      "mapred-site" : {
        "properties" : {
          "mapreduce.jobhistory.address" : "%HOSTGROUP::master_2%:10020",
          "mapreduce.jobhistory.webapp.address" : "%HOSTGROUP::master_2%:19888"
        }
      }
    },
    {
      "hbase-env" : {
        "properties" : {
          "hbase_pid_dir" : "/var/run/hadoop/hbase",
          "hbase_log_dir" : "/var/log/hadoop/hbase"
        }
      }
    },
    {
      "mapred-env" : {
        "properties" : {
          "mapred_log_dir_prefix" : "/var/log/hadoop/mapreduce",
          "mapred_pid_dir_prefix" : "/var/run/hadoop/mapreduce"
        }
      }
    },
    {
      "ams-hbase-env" : {
        "properties" : {
          "hbase_pid_dir" : "/var/run/ambari-metrics-collector/",
          "hbase_log_dir" : "/var/log/ambari-metrics-collector"
        }
      }
    },
    {
      "yarn-site" : {
        "properties" : {
          "yarn.resourcemanager.webapp.address" : "%HOSTGROUP::master_2%:8088",
          "yarn.log.server.url" : "http://%HOSTGROUP::master_2%:19888/jobhistory/logs",
          "yarn.timeline-service.webapp.address" : "%HOSTGROUP::master_2%:8188",
          "yarn.timeline-service.webapp.https.address" : "%HOSTGROUP::master_2%:8190",
          "yarn.resourcemanager.webapp.https.address" : "%HOSTGROUP::master_2%:8090",
          "yarn.resourcemanager.admin.address" : "%HOSTGROUP::master_2%:8141",
          "yarn.resourcemanager.resource-tracker.address" : "%HOSTGROUP::master_2%:8025",
          "yarn.resourcemanager.hostname" : "%HOSTGROUP::master_2%",
          "yarn.timeline-service.address" : "%HOSTGROUP::master_2%:10200",
          "yarn.resourcemanager.scheduler.address" : "%HOSTGROUP::master_2%:8030",
          "yarn.resourcemanager.zk-address" : "%HOSTGROUP::master_3%:2181,%HOSTGROUP::master_2%:2181,%HOSTGROUP::master_1%:2181",
          "yarn.resourcemanager.address" : "%HOSTGROUP::master_2%:8050",
          "hadoop.registry.zk.quorum" : "%HOSTGROUP::master_3%:2181,%HOSTGROUP::master_2%:2181,%HOSTGROUP::master_1%:2181"
        }
      }
    },
    {
      "zoo.cfg" : {
        "properties" : {
          "dataDir" : "/hadoop/zookeeper"
        }
      }
    },
    {
      "hadoop-env" : {
        "properties" : {
          "hdfs_log_dir_prefix" : "/var/log/hadoop/hdfs",
          "hadoop_pid_dir_prefix" : "/var/run/hadoop/hdfs"
        }
      }
    },
    {
      "zookeeper-env" : {
        "properties" : {
          "zk_log_dir" : "/var/log/hadoop/zookeeper",
          "zk_pid_dir" : "/var/run/hadoop/zookeeper"
        }
      }
    },
    {
      "hbase-site" : {
        "properties_attributes" : { },
        "properties" : {
          "hbase.rootdir" : "hdfs://%HOSTGROUP::master_3%:8020/apps/hbase/data",
          "hbase.zookeeper.quorum" : "%HOSTGROUP::master_3%,%HOSTGROUP::master_2%,%HOSTGROUP::master_1%"
        }
      }
    },
    {
      "ams-env" : {
        "properties_attributes" : { },
        "properties" : {
          "metrics_monitor_log_dir" : "/var/log/ambari-metrics-monitor",
          "metrics_collector_log_dir" : "/var/log/ambari-metrics-collector",
          "metrics_monitor_pid_dir" : "/var/run/ambari-metrics-monitor",
          "metrics_collector_pid_dir" : "/var/run/ambari-metrics-collector"
        }
      }
    },
    {
      "hdfs-site" : {
        "properties_attributes" : {
          "final" : {
            "dfs.support.append" : "true",
            "dfs.namenode.http-address" : "true"
          }
        },
        "properties" : {
          "dfs.datanode.data.dir" : "/hadoop/hdfs/data",
          "dfs.namenode.https-address" : "%HOSTGROUP::master_3%:50470",
          "dfs.journalnode.edits.dir" : "/hadoop/hdfs/journalnode",
          "dfs.namenode.checkpoint.dir" : "/hadoop/hdfs/namesecondary",
          "dfs.namenode.secondary.http-address" : "%HOSTGROUP::master_2%:50090",
          "dfs.namenode.http-address" : "%HOSTGROUP::master_3%:50070",
          "dfs.namenode.rpc-address" : "%HOSTGROUP::master_3%:8020",
          "dfs.namenode.name.dir" : "/hadoop/hdfs/namenode",
          "dfs.hosts.exclude" : "/etc/hadoop/conf/dfs.exclude"
        }
      }
    },
    {
      "oozie-site" : {
        "properties" : {
          "oozie.db.schema.name" : "oozie",
          "oozie.service.JPAService.jdbc.driver" : "com.mysql.jdbc.Driver",
          "oozie.base.url" : "http://%HOSTGROUP::master_1%:11000/oozie",
          "oozie.service.JPAService.jdbc.username" : "oozie",
          "oozie.service.JPAService.jdbc.url" : "jdbc:mysql://%HOSTGROUP::master_2%/oozie"
        }
      }
    },
    {
      "webhcat-site" : {
        "properties_attributes" : { },
        "properties" : {
          "templeton.zookeeper.hosts" : "%HOSTGROUP::master_3%:2181,%HOSTGROUP::master_2%:2181,%HOSTGROUP::master_1%:2181"
        }
      }
    },
    {
      "hcat-env" : {
        "properties_attributes" : { },
        "properties" : {
          "content" : "\n      # Licensed to the Apache Software Foundation (ASF) under one\n      # or more contributor license agreements. See the NOTICE file\n      # distributed with this work for additional information\n      # regarding copyright ownership. The ASF licenses this file\n      # to you under the Apache License, Version 2.0 (the\n      # \"License\"); you may not use this file except in compliance\n      # with the License. You may obtain a copy of the License at\n      #\n      # http://www.apache.org/licenses/LICENSE-2.0\n      #\n      # Unless required by applicable law or agreed to in writing, software\n      # distributed under the License is distributed on an \"AS IS\" BASIS,\n      # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n      # See the License for the specific language governing permissions and\n      # limitations under the License.\n\n      JAVA_HOME={{java64_home}}\n      HCAT_PID_DIR={{hcat_pid_dir}}/\n      HCAT_LOG_DIR={{hcat_log_dir}}/\n      HCAT_CONF_DIR={{hcat_conf_dir}}\n      HADOOP_HOME=${HADOOP_HOME:-{{hadoop_home}}}\n      #DBROOT is the path where the connector jars are downloaded\n      DBROOT={{hcat_dbroot}}\n      USER={{hcat_user}}\n      METASTORE_PORT={{hive_metastore_port}}"
        }
      }
    }
  ],
  "host_groups" : [
    {
      "name" : "master_1",
      "configurations" : [ ],
      "components" : [
        {
          "name" : "ZOOKEEPER_CLIENT"
        },
        {
          "name" : "OOZIE_CLIENT"
        },
        {
          "name" : "HBASE_CLIENT"
        },
        {
          "name" : "HCAT"
        },
        {
          "name" : "METRICS_MONITOR"
        },
        {
          "name" : "TEZ_CLIENT"
        },
        {
          "name" : "HDFS_CLIENT"
        },
        {
          "name" : "HIVE_CLIENT"
        },
        {
          "name" : "YARN_CLIENT"
        },
        {
          "name" : "MAPREDUCE2_CLIENT"
        },
        {
          "name" : "PIG"
        },
        {
          "name" : "ZOOKEEPER_SERVER"
        },
        {
          "name" : "HIVE_METASTORE"
        },
        {
          "name" : "AMBARI_SERVER"
        },
        {
          "name" : "HIVE_SERVER"
        },
        {
          "name" : "OOZIE_SERVER"
        },
        {
          "name" : "METRICS_COLLECTOR"
        },
        {
          "name" : "WEBHCAT_SERVER"
        }
      ],
      "cardinality" : "1"
    },
    {
      "name" : "master_2",
      "configurations" : [ ],
      "components" : [
        {
          "name" : "ZOOKEEPER_SERVER"
        },
        {
          "name" : "HISTORYSERVER"
        },
        {
          "name" : "APP_TIMELINE_SERVER"
        },
        {
          "name" : "HDFS_CLIENT"
        },
        {
          "name" : "METRICS_MONITOR"
        },
        {
          "name" : "SECONDARY_NAMENODE"
        },
        {
          "name" : "TEZ_CLIENT"
        },
        {
          "name" : "RESOURCEMANAGER"
        }
      ],
      "cardinality" : "1"
    },
    {
      "name" : "master_3",
      "configurations" : [ ],
      "components" : [
        {
          "name" : "ZOOKEEPER_SERVER"
        },
        {
          "name" : "HBASE_MASTER"
        },
        {
          "name" : "NAMENODE"
        },
        {
          "name" : "HDFS_CLIENT"
        },
        {
          "name" : "METRICS_MONITOR"
        }
      ],
      "cardinality" : "1"
    },
    {
      "name" : "slave_1",
      "configurations" : [ ],
      "components" : [
        {
          "name" : "HBASE_REGIONSERVER"
        },
        {
          "name" : "NODEMANAGER"
        },
        {
          "name" : "METRICS_MONITOR"
        },
        {
          "name" : "DATANODE"
        }
      ],
      "cardinality" : "4"
    }
  ],
  "Blueprints" : {
    "stack_name" : "HDP",
    "stack_version" : "2.3",
    "blueprint_name" : "hdp-2.3-hbase-noha"
  },
  "default_password" : "hadoop"
}